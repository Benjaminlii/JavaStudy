<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="cargoDelete.css" type="text/css" rel="stylesheet">
    <script type="text/javascript" src="../js/cookie.js"></script>
    <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
    <script type="text/javascript">
        var json = JSON.stringify(jQuery.parseJSON(getCookie("item")));
        delCookie("item");

        function set(item) {
            var jsons = jQuery.parseJSON(item);

            $("#u_id").val(jsons.u_id);
            $("#d_value").val(getValueByID(jsons.d_id));
            $("#username").val(jsons.username);
            $("#password").val(jsons.password);

            $("#updateButton").attr("onclick", "jumpWithCookie(" + item + ",'/BHY/html/BHY-updateEmployee.html')")
        }

            function decision() {
                $.ajax({
                    url: "/BHY/UpdateUserServlet",
                    type: "post",
                    data: {"u_id": $("#u_id").val()},
                    success: function (result) {
                        var jsons = jQuery.parseJSON(result);
                        if (json.rtn == 1) {
                            alert("删除成功");
                            $(location).attr('href','');
                        } else {
                            alert("删除失败，请重试");
                        }
                    },
                    error: function(){
                        alert("error");
                    }
                })
            }

            function deleted(){
                if(window.confirm("是否删除")){
                    decision();
                }
            }


    </script>
</head>
<body>
<div class="all">
    <h1>用户信息</h1>
    <div>
        <div>用户id<input type="text" id="u_id" readonly="readonly"></div>
        <div>用户名<input type="text" id="username" readonly="readonly"></div>
        <div>密码<input type="text" id="password" readonly="readonly"></div>
        <div>用户类型<input type="text" id="d_value" readonly="readonly"></div>
    </div>
    <div>
        <button id="updateButton">修改</button>
        <button onclick="deleted()">删除</button>
    </div>
</div>
<script>
    set(json);
</script>
</body>
</html>