<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BHY</title>
    <link rel="stylesheet" type="text/css" href="../css/BHY-all-css.css"/>

    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <script type="text/javascript" src="../js/cookie.js"></script>
    <script type="text/javascript" src="../js/setSelect.js"></script>
    <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
    <script type="text/javascript">
        function findRecordLimit(num) {
            var page = eval(document.getElementById("page").innerText);
            if (page === 1 && num === -1) {
                num = 0;
            }
            page += num;
            document.getElementById("page").innerText = page;
            clearElement("tb");
            $.ajax({
                url: "/BHY/FindRecordLimitServlet",
                type: "post",
                data: {"page": page},
                success: function (result) {
                    var tb = document.getElementById("tb");
                    var jsons = jQuery.parseJSON(result);

                    $.each(jsons, function (i, item) {

                        var tr = document.createElement("tr");
                        var td_rid = document.createElement("td");
                        td_rid.innerHTML = item.r_id;
                        var td_cname = document.createElement("td");
                        td_cname.innerHTML = item.c_name;
                        var td_clname = document.createElement("td");
                        td_clname.innerHTML = item.cl_name;
                        var td_rtime = document.createElement("td");
                        td_rtime.innerHTML = item.r_time;

                        var td_input = document.createElement("td");
                        var input = document.createElement("input");
                        input.value = "ğŸ“";
                        input.type = "button";
                        input.setAttribute("onclick", "jumpWithCookie(" + JSON.stringify(item) + ",\"/BHY/html/BHY-showRecord.html\" )");

                        td_input.appendChild(input);

                        tr.appendChild(td_rid);
                        tr.appendChild(td_cname);
                        tr.appendChild(td_clname);
                        tr.appendChild(td_rtime);
                        tr.appendChild(td_input);
                        tb.appendChild(tr);
                    });
                    setAddButton(tb, 5, "/BHY/html/BHY-addRecord.html")
                },
                error: function () {
                    alert("error");
                }
            })
        }

        function setAdm() {
            $.ajax({
                type: "post",
                url: "/BHY/getAdminServlet",
                success: function (resule) {
                    var json = jQuery.parseJSON(resule);
                    if (json.isLogin == 1) {
                        $("#adm-people").val("[" + json.username + "]");
                    } else {
                        $(location).attr("href", "/BHY/html/BHY-login.html");
                    }
                }
            })
        }
    </script>
    <link rel="stylesheet" href="../css/BHY-login-css.css">
</head>


<body>
<div class="BHY-header">
    <div class="BHY-logo BHY-Ajax.Main-content">
        <a href="/BHY/html/BHY-findUserLimit.html"><img src="../image/logo.png" alt="LOGO" height="74"/></a>
        <ul class="BHY-header-linker">
            <li><span>å½“å‰ç™»å½•</span></li>
            <li><span id="adm-people">[admin]</span></li>
            <li><a onclick="logout()">é€€å‡º</a></li>
        </ul>
    </div>
</div>

<div class=BHY-body>
    <!-- è¿™é‡Œæ”¾ç½®bodyçš„å†…å®¹ -->
    <div class="body-box panel-body">
        <div class="body-left ">
            <ul class="nav nav-pills nav-stacked" style="font-size: 20px">
                <li><a href="/BHY/html/BHY-findUserLimit.html">ç”¨æˆ·ç®¡ç†</a></li>
                <li><a href="/BHY/html/BHY-findPetLimit.html">å® ç‰©ç®¡ç†</a></li>
                <li><a href="/BHY/html/BHY-findServiceLimit.html">æœåŠ¡ç®¡ç†</a></li>
                <li class="active"><a href="/BHY/html/BHY-findRecordLimit.html">é”€å”®ç®¡ç†</a></li>
                <li><a href="/BHY/html/BHY-findStoreLimit.html">åº—é“ºç®¡ç†</a></li>
                <li><a href="/BHY/html/BHY-findCargoLimit.html">è´§ç‰©ç®¡ç†</a></li>
                <li><a href="/BHY/html/BHY-findEmployeeLimit.html">å‘˜å·¥ç®¡ç†</a></li>
                <li><a href="/BHY/html/BHY-findClientLimit.html">é¡¾å®¢ç®¡ç†</a></li>
            </ul>
        </div>
        <div class="body-main" style="margin-left: 5px">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <span class="text-primary" style="font-size: 25px">é”€å”®ä¿¡æ¯ä¸€è§ˆ</span>
                    </h3>
                </div>
                <div class="panel-body">
                    <table class="table table-striped">
                        <th>è®¢å•ID</th>
                        <th>å•†å“åç§°</th>
                        <th>é¡¾å®¢å§“å</th>
                        <th>å‡ºå”®æ—¶é—´</th>
                        <th>è¯¦æƒ…</th>
                        </thead>
                        <tbody id="tb">
                    </table>
                    <div style="width:300px;margin:0 200px">
                        <button class="btn btn-primary" onclick="findRecordLimit(-1)">
                        <span class="glyphicon glyphicon-chevron-left"
                              style="color: rgb(255, 255, 255); font-size: 15px;">
                            å‰ä¸€é¡µ
                        </span>
                        </button>
                        <label class="text-primary">
                            å½“å‰åœ¨ç¬¬&nbsp<label id="page">1</label>&nbspé¡µ
                        </label>
                        <button class="btn btn-primary" onclick="findRecordLimit(1)">
                        <span class="glyphicon glyphicon-chevron-right"
                              style="color: rgb(255, 255, 255); font-size: 15px;">
                            åä¸€é¡µ
                        </span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="BHY-footer" class="BHY-footer">
    <div class="BHY-footer-copyright">
        <p class="BHY-clearfix BHY-links">
            <a href="javascript:;" target="_blank">å…³äºæˆ‘ä»¬</a>
            <a href="javascript:;" target="_blank">æ³•å¾‹å£°æ˜</a>
            <a href="javascript:;" target="_blank">æœåŠ¡æ¡æ¬¾</a>
            <a href="javascript:;" target="_blank">è”ç³»æ–¹å¼</a>
        <p style="font-family:arial;">åœ°å€ï¼šé™•è¥¿çœè¥¿å®‰å¸‚é•¿å®‰åŒº&nbsp;&nbsp;è®¸å¯è¯B1-20190601&nbsp;&nbsp;COPYRIGHT&nbsp;&nbsp;Â©&nbsp;
            2019-2029 uimaker &nbsp;ç‰ˆæƒæ‰€æœ‰&nbsp;ICPè¯ï¼šxx00000000</p>
        <p style="font-family:arial;">è®¸å¯è¯B1-20190601&nbsp;&nbsp;&nbsp;&nbsp;ç‰ˆæƒæ‰€æœ‰:ä¸ä¼šå…»å® ç‰©èˆ</p>
        </p>
    </div>
</div>

<script>
    findRecordLimit(0);
    setAdm();
</script>
</body>
</html>