<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="../js/jquery-3.3.1.js"></script>
    <script type="text/javascript">
        window.onload=function () {
            findCargoLimit(0);
        }
        function findCargoLimit(num){
            var page = eval(document.getElementById("page").innerText);
            if(page === 1&&num === -1){
                num = 0;
            }
            page+=num;
            document.getElementById("page").innerText = page;
            $.ajax({
                url: "/BHY/FindCargoLimitServlet",
                type: "post",
                data: {"page":page},
                success: function(result){
                    var tb = document.getElementById("tb");
                    var jsons = jQuery.parseJSON(result);

                    $.each(jsons,function(i,item){
                        // alert(JSON.stringify(item));

                        var tr = document.createElement("tr");
                        var td1 = document.createElement("td");
                        td1.innerHTML = item.c_name;
                        var td2 = document.createElement("td");
                        td2.innerHTML = item.c_producedDate;
                        var td3 = document.createElement("td");
                        td3.innerHTML = item.c_getDate;
                        var td4 = document.createElement("td");
                        td4.innerHTML = item.c_num;
                        var td5 = document.createElement("td");
                        td5.innerHTML = item.st_name;
                        var td6 = document.createElement("td");
                        td6.innerHTML = item.st_address;
                        var td7 = document.createElement("td");
                        td7.innerHTMl = item.d_value;
                        var td8 = document.createElement("td");
                        td8.innerHTML = item.st_name;

                        var td_input = document.createElement("td");
                        var input = document.createElement("input");
                        input.value = "按钮";
                        input.type = "button";
                        input.setAttribute("onclick", "a(" + JSON.stringify(item) + ")");
                        td_input.appendChild(input);


                        tr.appendChild(td1);
                        tr.appendChild(td2);
                        tr.appendChild(td3);
                        tr.appendChild(td4);
                        tr.appendChild(td5);
                        tr.appendChild(td6);
                        tr.appendChild(td7);
                        tr.appendChild(td8);
                        tr.appendChild(td_input);
                        tb.appendChild(tr);
                    })
                },
                error: function(){
                    alert("error");
                }
            })
        }
        function a(i) {
            // var json = jQuery.parseJSON(i);
            // alert(JSON.stringify(json));
            alert(JSON.stringify(i));
        }
    </script>
</head>
<body>
<table border="1">
    <thead>
    <th>商品名称</th>
    <th>保质期</th>
    <th>生产日期</th>
    <th>数量</th>
    <th>用户id</th>
    <th>商品分类</th>
    <th>宠物店编号</th>
    </thead>
    <tbody id="tb">

    </tbody>
</table>
<input type="button" onclick="findCargoLimit(-1)" value="上一页">
<label>
    当前在第<label id="page">1</label>页
</label>
<input type="button" onclick="findCargoLimit(1)" value="下一页">
</body>
</html>